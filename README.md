# dataUploadSystem - æ•°æ®ä¸Šé“¾ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº React å’Œ TypeScript çš„ä»¥å¤ªåŠåŒºå—é“¾æ•°æ®ä¸Šé“¾ç³»ç»Ÿï¼Œé€šè¿‡ MetaMask é’±åŒ…è¿æ¥å’Œæ™ºèƒ½åˆçº¦äº¤äº’ï¼Œæä¾›å¤šç§æ–¹å¼å°†æ•°æ®å†™å…¥åŒºå—é“¾å¹¶æŸ¥è¯¢å†å²è®°å½•ã€‚è¯¥ç³»ç»Ÿæ”¯æŒ ETH è½¬è´¦ã€æ™ºèƒ½åˆçº¦è°ƒç”¨ã€GraphQL æ•°æ®æŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚

## æ ¸å¿ƒç»„ä»¶ï¼šDataUploadSystem

`DataUploadSystem` æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œä½äº `src/components/DataUploadSystem.tsx`ï¼Œæä¾›äº†å®Œæ•´çš„åŒºå—é“¾æ•°æ®ä¸Šé“¾å’ŒæŸ¥è¯¢åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”— **é’±åŒ…è¿æ¥** - æ”¯æŒ MetaMask é’±åŒ…è¿æ¥å’Œç½‘ç»œåˆ‡æ¢
- ğŸ’° **ETH è½¬è´¦** - æ”¯æŒä»¥å¤ªåŠè½¬è´¦å¹¶è®°å½•äº¤æ˜“è¯¦æƒ…
- ğŸ“ **æ™ºèƒ½åˆçº¦è°ƒç”¨** - é€šè¿‡åˆçº¦å†™å…¥è®²å¸ˆä¿¡æ¯åˆ°åŒºå—é“¾
- ğŸ” **å¤šç»´åº¦æŸ¥è¯¢** - æ”¯æŒæŒ‰ IDã€å¹´é¾„ã€å¹´é¾„èŒƒå›´æŸ¥è¯¢è®²å¸ˆè®°å½•
- ğŸ“Š **äº¤æ˜“è®°å½•** - å®æ—¶æ˜¾ç¤ºäº¤æ˜“è¯¦æƒ…å’ŒçŠ¶æ€
- ğŸŒ **ç½‘ç»œæ”¯æŒ** - æ”¯æŒ Sepolia æµ‹è¯•ç½‘ç»œ
- ğŸ“ˆ **æ•°æ®å¯è§†åŒ–** - ç›´è§‚å±•ç¤ºåŒºå—é“¾äº¤æ˜“å’Œåˆçº¦æ•°æ®

## æŠ€æœ¯æ ˆ

- **React 19** - ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **ethers.js v6** - ä»¥å¤ªåŠåŒºå—é“¾äº¤äº’åº“
- **Apollo Client** - GraphQL å®¢æˆ·ç«¯å’ŒçŠ¶æ€ç®¡ç†
- **Ant Design** - UI ç»„ä»¶åº“
- **MetaMask** - ä»¥å¤ªåŠé’±åŒ…é›†æˆ

## ç»„ä»¶ç»“æ„

```
src/components/
â”œâ”€â”€ DataUploadSystem.tsx    # ä¸»è¦æ•°æ®ä¸Šé“¾ç³»ç»Ÿç»„ä»¶
â”œâ”€â”€ DataUploadSystem.css    # ç»„ä»¶æ ·å¼æ–‡ä»¶
â”œâ”€â”€ NetworkSwitcher.jsx     # ç½‘ç»œåˆ‡æ¢ç»„ä»¶
â””â”€â”€ NetworkSwitcher.css     # ç½‘ç»œåˆ‡æ¢æ ·å¼
```

## ä¸»è¦åŠŸèƒ½æ¨¡å—

### 1. é’±åŒ…è¿æ¥ç®¡ç†

- **MetaMask é›†æˆ**ï¼šè‡ªåŠ¨æ£€æµ‹å’Œè¿æ¥ MetaMask é’±åŒ…
- **è´¦æˆ·ä¿¡æ¯**ï¼šæ˜¾ç¤ºå½“å‰è¿æ¥çš„é’±åŒ…åœ°å€å’Œä½™é¢
- **ç½‘ç»œåˆ‡æ¢**ï¼šæ”¯æŒåˆ‡æ¢åˆ° Sepolia æµ‹è¯•ç½‘ç»œ
- **è¿æ¥çŠ¶æ€**ï¼šå®æ—¶æ˜¾ç¤ºé’±åŒ…è¿æ¥çŠ¶æ€

```typescript
const connectMetaMask = async () => {
  if(window.ethereum) {
    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
    // åˆ‡æ¢åˆ° Sepolia ç½‘ç»œ
    await window.ethereum.request({ 
      method: 'wallet_switchEthereumChain', 
      params: [{ chainId: `0xaa36a7` }] 
    });
  }
};
```

### 2. ETH è½¬è´¦åŠŸèƒ½

- **è½¬è´¦è¡¨å•**ï¼šè¾“å…¥è½¬è´¦é‡‘é¢ã€æ”¶æ¬¾åœ°å€å’Œæ•°æ®ç•™è¨€
- **äº¤æ˜“æ‰§è¡Œ**ï¼šé€šè¿‡ ethers.js å‘é€ä»¥å¤ªåŠäº¤æ˜“
- **äº¤æ˜“è·Ÿè¸ª**ï¼šå®æ—¶æ˜¾ç¤ºäº¤æ˜“å“ˆå¸Œå’Œç¡®è®¤çŠ¶æ€
- **è¯¦æƒ…è®°å½•**ï¼šè‡ªåŠ¨è®°å½•äº¤æ˜“è¯¦æƒ…åˆ°æœ¬åœ°è¡¨æ ¼

**ä¸»è¦ç‰¹æ€§ï¼š**
- æ”¯æŒ ETH è½¬è´¦
- å¯é™„åŠ æ•°æ®ç•™è¨€
- è‡ªåŠ¨è®¡ç®— Gas è´¹ç”¨
- Etherscan é“¾æ¥æŸ¥çœ‹

### 3. æ™ºèƒ½åˆçº¦äº¤äº’

- **åˆçº¦åœ°å€**ï¼š`0x5d66ac89CB632c4354bd205545c71f9DEfFB4384`
- **åˆçº¦åŠŸèƒ½**ï¼šè°ƒç”¨ `setInfo` æ–¹æ³•å†™å…¥è®²å¸ˆä¿¡æ¯
- **äº‹ä»¶ç›‘å¬**ï¼šç›‘å¬ `InstructorCreated` äº‹ä»¶
- **æ•°æ®ä¸Šé“¾**ï¼šå°†å§“åå’Œå¹´é¾„ä¿¡æ¯æ°¸ä¹…å­˜å‚¨åˆ°åŒºå—é“¾

```typescript
const contract = new ethers.Contract(INFO_CONTRACT_ADDRESS, INFO_CONTRACT_ABI, signer);
const tx = await contract.setInfo(name, age);
const receipt = await tx.wait();
```

### 4. GraphQL æ•°æ®æŸ¥è¯¢

æ”¯æŒå¤šç§æŸ¥è¯¢æ–¹å¼ï¼š

#### æŸ¥è¯¢æ‰€æœ‰è®²å¸ˆè®°å½•
```graphql
query GetInstructors($first: Int!, $orderBy: String!, $orderDirection: String!) {
  instructors(first: $first, orderBy: $orderBy, orderDirection: $orderDirection) {
    id
    instructorId
    name
    age
    blockNumber
    blockTimestamp
    transactionHash
  }
}
```

#### æŒ‰ ID æŸ¥è¯¢è®²å¸ˆ
```graphql
query GetInstructorById($instructorId: String!) {
  instructors(where: { instructorId: $instructorId }) {
    id
    instructorId
    name
    age
    blockNumber
    blockTimestamp
    transactionHash
  }
}
```

#### æŒ‰å¹´é¾„æŸ¥è¯¢è®²å¸ˆ
```graphql
query GetInstructorsByAge($age: String!) {
  instructors(where: { age: $age }) {
    id
    instructorId
    name
    age
    blockNumber
    blockTimestamp
    transactionHash
  }
}
```

#### æŒ‰å¹´é¾„èŒƒå›´æŸ¥è¯¢è®²å¸ˆ
```graphql
query GetInstructorsByAgeRange($minAge: String!, $maxAge: String!) {
  instructors(where: { age_gte: $minAge, age_lte: $maxAge }) {
    id
    instructorId
    name
    age
    blockNumber
    blockTimestamp
    transactionHash
  }
}
```

### 5. äº¤æ˜“è®°å½•è¡¨æ ¼

å®æ—¶æ˜¾ç¤ºæ‰€æœ‰äº¤æ˜“è®°å½•ï¼ŒåŒ…æ‹¬ï¼š
- **äº¤æ˜“å“ˆå¸Œ**ï¼šå¯ç‚¹å‡»è·³è½¬åˆ° Etherscan
- **åŒºå—å·**ï¼šäº¤æ˜“æ‰€åœ¨åŒºå—
- **æ—¶é—´æˆ³**ï¼šäº¤æ˜“ç¡®è®¤æ—¶é—´
- **å‘é€æ–¹/æ¥æ”¶æ–¹**ï¼šäº¤æ˜“åŒæ–¹åœ°å€
- **é‡‘é¢**ï¼šè½¬è´¦é‡‘é¢ï¼ˆETHï¼‰
- **Gas ä¿¡æ¯**ï¼šGas ç”¨é‡ã€ä»·æ ¼å’Œè´¹ç”¨
- **äº¤æ˜“çŠ¶æ€**ï¼šæˆåŠŸ/å¤±è´¥çŠ¶æ€æ˜¾ç¤º

## ç½‘ç»œé…ç½®

### Sepolia æµ‹è¯•ç½‘ç»œ
- **ç½‘ç»œåç§°**ï¼šSepolia
- **RPC URL**ï¼š`https://sepolia.infura.io/v3/[API_KEY]`
- **Chain ID**ï¼š`0xaa36a7` (11155111)
- **åŒºå—æµè§ˆå™¨**ï¼šhttps://sepolia.etherscan.io/

### æ™ºèƒ½åˆçº¦ä¿¡æ¯
- **åˆçº¦åœ°å€**ï¼š`0x5d66ac89CB632c4354bd205545c71f9DEfFB4384`
- **ç½‘ç»œ**ï¼šSepolia æµ‹è¯•ç½‘
- **ä¸»è¦æ–¹æ³•**ï¼š`setInfo(string _name, uint256 _age)`
- **äº‹ä»¶**ï¼š`InstructorCreated(uint256 indexed id, string name, uint256 indexed age)`

## ä½¿ç”¨æŒ‡å—

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start
```

### 2. é’±åŒ…è®¾ç½®

1. å®‰è£… MetaMask æµè§ˆå™¨æ’ä»¶
2. åˆ›å»ºæˆ–å¯¼å…¥é’±åŒ…
3. æ·»åŠ  Sepolia æµ‹è¯•ç½‘ç»œ
4. è·å–æµ‹è¯• ETHï¼ˆé€šè¿‡æ°´é¾™å¤´ï¼‰

### 3. åŠŸèƒ½ä½¿ç”¨

#### è¿æ¥é’±åŒ…
1. ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ç½‘ç»œåˆ‡æ¢å™¨
2. ç‚¹å‡»"è¿æ¥ MetaMask"æŒ‰é’®
3. åœ¨ MetaMask ä¸­ç¡®è®¤è¿æ¥
4. ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° Sepolia ç½‘ç»œ

#### ETH è½¬è´¦
1. åˆ‡æ¢åˆ°"è½¬è´¦æ–¹å¼"æ ‡ç­¾é¡µ
2. è¾“å…¥è½¬è´¦é‡‘é¢ï¼ˆETHï¼‰
3. è¾“å…¥æ”¶æ¬¾è´¦æˆ·åœ°å€
4. å¯é€‰ï¼šè¾“å…¥æ•°æ®ç•™è¨€
5. ç‚¹å‡»"æäº¤è½¬è´¦"æŒ‰é’®
6. åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“

#### å†™å…¥åˆçº¦æ•°æ®
1. åˆ‡æ¢åˆ°"æ—¥å¿—æ–¹å¼"æ ‡ç­¾é¡µ
2. è¾“å…¥è®²å¸ˆå§“å
3. è¾“å…¥è®²å¸ˆå¹´é¾„
4. ç‚¹å‡»"æäº¤æ—¥å¿—"æŒ‰é’®
5. åœ¨ MetaMask ä¸­ç¡®è®¤äº¤æ˜“
6. ç­‰å¾…äº¤æ˜“ç¡®è®¤å’Œäº‹ä»¶è§¦å‘

#### æŸ¥è¯¢æ•°æ®
1. åˆ‡æ¢åˆ°"æŸ¥è¯¢æ•°æ®"æ ‡ç­¾é¡µ
2. é€‰æ‹©æŸ¥è¯¢æ–¹å¼ï¼š
   - æŒ‰è®²å¸ˆ ID æŸ¥è¯¢
   - æŒ‰å¹´é¾„æŸ¥è¯¢
   - æŒ‰å¹´é¾„èŒƒå›´æŸ¥è¯¢
3. è¾“å…¥æŸ¥è¯¢æ¡ä»¶
4. ç‚¹å‡»å¯¹åº”çš„æŸ¥è¯¢æŒ‰é’®
5. æŸ¥çœ‹æŸ¥è¯¢ç»“æœ

## æ•°æ®ç»“æ„

### DataRecord æ¥å£
```typescript
interface DataRecord {
  id: string;
  txHash?: string;
  blockNumber?: string;
  amount?: string;
  sender?: string;
  recipient?: string;
  message?: string;
  gasUsed?: string;
  gasPrice?: string;
  transactionFee?: string;
  timestamp: string;
  status: string;
  etherscanUrl?: string;
}
```

### è®²å¸ˆè®°å½•ç»“æ„
```typescript
interface Instructor {
  id: string;
  instructorId: string;
  name: string;
  age: string;
  blockNumber: string;
  blockTimestamp: string;
  transactionHash: string;
}
```

## æ ·å¼è®¾è®¡

ç»„ä»¶é‡‡ç”¨ç°ä»£åŒ–çš„ CSS è®¾è®¡ï¼ŒåŒ…æ‹¬ï¼š
- **å“åº”å¼å¸ƒå±€**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **æ ‡ç­¾é¡µè®¾è®¡**ï¼šæ¸…æ™°çš„åŠŸèƒ½åˆ†åŒº
- **è¡¨æ ¼å±•ç¤º**ï¼šä¸“ä¸šçš„æ•°æ®å±•ç¤ºç•Œé¢
- **çŠ¶æ€æŒ‡ç¤º**ï¼šç›´è§‚çš„è¿æ¥å’Œäº¤æ˜“çŠ¶æ€
- **äº¤äº’åé¦ˆ**ï¼šä¸°å¯Œçš„ç”¨æˆ·æ“ä½œåé¦ˆ

## é”™è¯¯å¤„ç†

ç³»ç»ŸåŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š
- **é’±åŒ…è¿æ¥é”™è¯¯**ï¼šæ£€æµ‹ MetaMask å®‰è£…å’Œè¿æ¥çŠ¶æ€
- **ç½‘ç»œé”™è¯¯**ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ­£ç¡®çš„æµ‹è¯•ç½‘ç»œ
- **äº¤æ˜“é”™è¯¯**ï¼šæ˜¾ç¤ºè¯¦ç»†çš„äº¤æ˜“å¤±è´¥åŸå› 
- **æŸ¥è¯¢é”™è¯¯**ï¼šGraphQL æŸ¥è¯¢å¼‚å¸¸å¤„ç†
- **åˆçº¦è°ƒç”¨é”™è¯¯**ï¼šæ™ºèƒ½åˆçº¦äº¤äº’å¼‚å¸¸å¤„ç†

## æ€§èƒ½ä¼˜åŒ–

- **æ‡’åŠ è½½æŸ¥è¯¢**ï¼šä½¿ç”¨ `useLazyQuery` æŒ‰éœ€æŸ¥è¯¢æ•°æ®
- **çŠ¶æ€ç®¡ç†**ï¼šåˆç†çš„ç»„ä»¶çŠ¶æ€è®¾è®¡
- **å†…å­˜ç®¡ç†**ï¼šåŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
- **ç¼“å­˜æœºåˆ¶**ï¼šApollo Client è‡ªåŠ¨ç¼“å­˜æŸ¥è¯¢ç»“æœ

## å®‰å…¨è€ƒè™‘

- **ç§é’¥å®‰å…¨**ï¼šä¸å­˜å‚¨ç”¨æˆ·ç§é’¥ï¼Œå®Œå…¨ä¾èµ– MetaMask
- **äº¤æ˜“ç¡®è®¤**ï¼šæ‰€æœ‰äº¤æ˜“éƒ½éœ€è¦ç”¨æˆ·åœ¨ MetaMask ä¸­ç¡®è®¤
- **ç½‘ç»œéªŒè¯**ï¼šç¡®ä¿è¿æ¥åˆ°æ­£ç¡®çš„æµ‹è¯•ç½‘ç»œ
- **è¾“å…¥éªŒè¯**ï¼šå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡ŒåŸºæœ¬éªŒè¯

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æŸ¥è¯¢åŠŸèƒ½

1. åœ¨ GraphQL å®¢æˆ·ç«¯ä¸­å®šä¹‰æ–°çš„æŸ¥è¯¢
2. åœ¨ç»„ä»¶ä¸­æ·»åŠ å¯¹åº”çš„ `useLazyQuery` Hook
3. åˆ›å»ºæŸ¥è¯¢è¡¨å•å’Œå¤„ç†å‡½æ•°
4. æ›´æ–°æŸ¥è¯¢ç»“æœæ˜¾ç¤ºé€»è¾‘

### æ‰©å±•æ™ºèƒ½åˆçº¦åŠŸèƒ½

1. æ›´æ–°åˆçº¦ ABI å®šä¹‰
2. æ·»åŠ æ–°çš„åˆçº¦æ–¹æ³•è°ƒç”¨
3. å¤„ç†æ–°çš„åˆçº¦äº‹ä»¶
4. æ›´æ–°äº¤æ˜“è®°å½•ç»“æ„

### è‡ªå®šä¹‰æ ·å¼

ä¿®æ”¹ `DataUploadSystem.css` æ–‡ä»¶æ¥è‡ªå®šä¹‰ç»„ä»¶æ ·å¼ï¼š
- `.data-upload-system` - ä¸»å®¹å™¨æ ·å¼
- `.system-header` - å¤´éƒ¨æ ·å¼
- `.tab-content` - æ ‡ç­¾é¡µå†…å®¹æ ·å¼
- `.form-section` - è¡¨å•åŒºåŸŸæ ·å¼
- `.query-results` - æŸ¥è¯¢ç»“æœæ ·å¼

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **MetaMask è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ MetaMask æ˜¯å¦å·²å®‰è£…
   - ç¡®è®¤æµè§ˆå™¨å…è®¸å¼¹çª—
   - é‡æ–°åˆ·æ–°é¡µé¢é‡è¯•

2. **ç½‘ç»œåˆ‡æ¢å¤±è´¥**
   - æ‰‹åŠ¨åœ¨ MetaMask ä¸­åˆ‡æ¢åˆ° Sepolia ç½‘ç»œ
   - æ£€æŸ¥ç½‘ç»œé…ç½®æ˜¯å¦æ­£ç¡®

3. **äº¤æ˜“å¤±è´¥**
   - æ£€æŸ¥è´¦æˆ·ä½™é¢æ˜¯å¦è¶³å¤Ÿ
   - ç¡®è®¤ Gas è´¹ç”¨è®¾ç½®
   - æŸ¥çœ‹ MetaMask é”™è¯¯ä¿¡æ¯

4. **æŸ¥è¯¢æ— ç»“æœ**
   - ç¡®è®¤ GraphQL ç«¯ç‚¹å¯è®¿é—®
   - æ£€æŸ¥æŸ¥è¯¢å‚æ•°æ˜¯å¦æ­£ç¡®
   - æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### è°ƒè¯•æŠ€å·§

- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
- æ£€æŸ¥ MetaMask æ§åˆ¶å°æ—¥å¿—
- åœ¨ Etherscan ä¸ŠéªŒè¯äº¤æ˜“çŠ¶æ€
- ä½¿ç”¨ GraphQL Playground æµ‹è¯•æŸ¥è¯¢

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… LICENSE æ–‡ä»¶ã€‚

## ç›¸å…³é“¾æ¥

- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/)
- [ethers.js æ–‡æ¡£](https://docs.ethers.org/)
- [Apollo Client æ–‡æ¡£](https://www.apollographql.com/docs/react/)
- [Ant Design æ–‡æ¡£](https://ant.design/)
- [MetaMask å¼€å‘è€…æ–‡æ¡£](https://docs.metamask.io/)
- [Sepolia æµ‹è¯•ç½‘ç»œ](https://sepolia.dev/)
- [Etherscan Sepolia](https://sepolia.etherscan.io/)
